
(deftype Third [x]
  Stringable
  (string-list [_]
    (list "(Third " (str x) ")")))

(deftype Second [y x]
  (assert (instance? Third x))

  Stringable
  (string-list [_]
    (list "(Second " (str x) ")")))

(deftype First [x]
  (assert (instance? Second x))

  Stringable
  (string-list [_]
    (list "(First " (str x) ")")))

(main [_]
  (-> (First (Second 's (Third 'q)))
      .x
      .x
      .x
      inc))
