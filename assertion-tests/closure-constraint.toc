
;; TODO: prints out a bunch of debug info

(defprotocol Boomer
  (boom [_ y]
    (print-err 'booooom)
    (abort)))

(deftype Dummy [nope])

(deftype Slider []
  Boomer
  (boom [_ y]
    (print-err 'pop (.nope y))))

(defn f [marvelous n]
  (assert (instance? Slider marvelous))

  (fn []
    (boom marvelous n)))

(main [_]
  (f (Slider) 1)
  (print-err 'done))
