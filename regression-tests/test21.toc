
(defn add-ints [x y]
  (inline Integer "
   return(add_ints(x_0, y_1));
"))

(def x 88)

(def r1
  (reify
    Type
    (instance? [_ x]
      (inline "
   fprintf(stderr, \"r1\\n\");
   return(checkInstance(IntegerType, x_1));"))))

;; (def r2 (let [v [1 3 4]]
;;           (reify
;;             Type
;;             (instance? [_ x]
;;               (pr* "r2\n")
;;               (maybe v)))))

;; (defn f [v]
;;   (reify
;;     Type
;;     (instance? [_ x]
;;       (pr* "r3\n")
;;       (maybe v))))

(main [_]
  (instance? r1 (add-ints 2 3))
  ;; (instance? r2 0)
  ;; (instance? (f "VV") 0)
  (pr* "Howdy folks 21\n"))
